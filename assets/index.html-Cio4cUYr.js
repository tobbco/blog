import{_ as i,c as a,a as e,o as n}from"./app-DLwuheDP.js";const l={};function t(h,s){return n(),a("div",null,s[0]||(s[0]=[e(`<h2 id="镜像文档地址" tabindex="-1"><a class="header-anchor" href="#镜像文档地址"><span>镜像文档地址</span></a></h2><p><a href="https://hub.docker.com/_/mysql" target="_blank" rel="noopener noreferrer">mysql - Official Image | Docker Hub</a></p><h2 id="dockerfile" tabindex="-1"><a class="header-anchor" href="#dockerfile"><span>Dockerfile</span></a></h2><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">FROM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql:8.0.39</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ENV</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TZ=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">RUN</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ln</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -sf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/share/zoneinfo/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$TZ</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/localtime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> echo</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $TZ</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/timezone</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="docker-componse-yml" tabindex="-1"><a class="header-anchor" href="#docker-componse-yml"><span>docker-componse.yml</span></a></h2><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">services:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  db:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    build:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      context:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    image:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql:8.0.39</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    container_name:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    restart:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> always</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    environment:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MYSQL_ROOT_PASSWORD=DlhNjSJT1NO_JwI_ikFc2iKxtpvX</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MYSQL_ROOT_HOST=%</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TZ=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ports:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 3306:3306</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    command</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --lower_case_table_names=1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --character_set_server=utf8mb4</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --collation_server=utf8mb4_general_ci</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --explicit_defaults_for_timestamp=true</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --max_allowed_packet=128M</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --default_authentication_plugin=caching_sha2_password</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    volumes:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/docker/mysql/docker/conf.d:/etc/mysql/conf.d</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/docker/mysql/docker/volumn:/var/lib/mysql</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/docker/mysql/docker/volumn_logs:/var/log/mysql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>目录需要提前创建好</p></blockquote><h2 id="启动" tabindex="-1"><a class="header-anchor" href="#启动"><span>启动</span></a></h2><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="日志" tabindex="-1"><a class="header-anchor" href="#日志"><span>日志</span></a></h2><p>使用以下命令查看容器日志</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> logs</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">container_i</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">d</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h2><p><code>/var/lib/mysql/mysql.sock -&gt; /var/run/mysqld/mysqld.sock</code></p><p>解决方案</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> prune</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>清除服务器docker中未使用的镜像缓存，可能有用。</p></blockquote>`,17)]))}const d=i(l,[["render",t],["__file","index.html.vue"]]),k=JSON.parse('{"path":"/article/f3c33ly1/","title":"Docker Compose部署Mysql8.0.39","lang":"zh-CN","frontmatter":{"title":"Docker Compose部署Mysql8.0.39","createTime":"2024/11/16 15:14:20","permalink":"/article/f3c33ly1/","tags":["Mysql","Docker"]},"headers":[],"readingTime":{"minutes":0.52,"words":156},"git":{"updatedTime":1737015927000,"contributors":[{"name":"xianchaoye","username":"xianchaoye","email":"18201082822@163.com","commits":1,"avatar":"https://avatars.githubusercontent.com/xianchaoye?v=4","url":"https://github.com/xianchaoye"}]},"filePathRelative":"docker/Docker Compose部署Mysql8.0.39.md","categoryList":[{"id":"05b605","sort":10008,"name":"docker"}],"bulletin":false}');export{d as comp,k as data};
